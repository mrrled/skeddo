<UserControl xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:newUI.ViewModels.SchedulePage.Schedule"
        xmlns:scheduleTable="clr-namespace:newUI.Views.SchedulePage.ScheduleTable"
        xmlns:lessonCard="clr-namespace:newUI.Views.SchedulePage.LessonCard"
        x:Class="newUI.Views.SchedulePage.ScheduleWindow.ScheduleWindow"
        x:DataType="vm:AnotherScheduleViewModel">

    <Grid>
        <Grid.ColumnDefinitions>
            <!-- Ð›ÐµÐ²Ð°Ñ ÐºÐ¾Ð»Ð¾Ð½ÐºÐ° Ð´Ð»Ñ Ð±ÑƒÑ„ÐµÑ€Ð° (Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ ÑˆÐ¸Ñ€Ð¸Ð½Ð°) -->
            <ColumnDefinition Width="200"/>
            <!-- ÐŸÑ€Ð°Ð²Ð°Ñ ÐºÐ¾Ð»Ð¾Ð½ÐºÐ° Ð´Ð»Ñ Ñ€Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ñ (Ð²ÑÑ Ð¾ÑÑ‚Ð°Ð²ÑˆÐ°ÑÑÑ ÑˆÐ¸Ñ€Ð¸Ð½Ð°) -->
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        
        <!-- Ð‘Ð¾ÐºÐ¾Ð²Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ Ñ Ð±ÑƒÑ„ÐµÑ€Ð¾Ð¼ Ð½Ð° Ð²ÑÑŽ Ð²Ñ‹ÑÐ¾Ñ‚Ñƒ -->
        <Border Grid.Column="0" 
               BorderBrush="LightGray" 
               BorderThickness="0,0,1,0"
               Background="WhiteSmoke">
            <DockPanel>
                <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ð±ÑƒÑ„ÐµÑ€Ð° -->
                <Border DockPanel.Dock="Top" 
                       Background="#f0f0f0" 
                       BorderBrush="LightGray" 
                       BorderThickness="0,0,0,1">
                    <StackPanel Margin="10">
                        <TextBlock Text="Ð‘ÑƒÑ„ÐµÑ€ ÑƒÑ€Ð¾ÐºÐ¾Ð²" 
                                  FontWeight="Bold" 
                                  FontSize="16" 
                                  HorizontalAlignment="Center"/>
                        
                        <Button Content="ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ Ð±ÑƒÑ„ÐµÑ€" 
                                Margin="0,10,0,0" 
                                HorizontalAlignment="Stretch"
                                Command="{Binding Buffer.ClearCommand}"
                                Padding="8,4"/>
                    </StackPanel>
                </Border>
                
                <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº ÑƒÑ€Ð¾ÐºÐ¾Ð² Ð² Ð±ÑƒÑ„ÐµÑ€Ðµ -->
                <ScrollViewer>
                    <ItemsControl ItemsSource="{Binding Buffer.LessonCards}"
                                 Margin="10">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border BorderBrush="#ddd" 
                                       BorderThickness="1" 
                                       Margin="0,0,0,5" 
                                       Background="White"
                                       CornerRadius="3">
                                    <lessonCard:LessonCard />
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                        
                        <!-- Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ Ð¿ÑƒÑÑ‚Ð¾Ð¼ Ð±ÑƒÑ„ÐµÑ€Ðµ -->
                        <ItemsControl.Styles>
                            <Style Selector="ItemsControl:empty">
                                <Setter Property="Template">
                                    <ControlTemplate>
                                        <StackPanel HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"
                                                   Margin="20">
                                            <TextBlock Text="Ð‘ÑƒÑ„ÐµÑ€ Ð¿ÑƒÑÑ‚" 
                                                      FontSize="14"
                                                      HorizontalAlignment="Center"/>
                                            <TextBlock Text="Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ ÑƒÑ€Ð¾ÐºÐ¸ Ð¸Ð· Ñ€Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ñ"
                                                      FontSize="11"
                                                      HorizontalAlignment="Center"
                                                      Margin="0,5,0,0"
                                                      TextWrapping="Wrap"
                                                      TextAlignment="Center"/>
                                        </StackPanel>
                                    </ControlTemplate>
                                </Setter>
                            </Style>
                        </ItemsControl.Styles>
                    </ItemsControl>
                </ScrollViewer>
            </DockPanel>
        </Border>

        <!-- ÐŸÑ€Ð°Ð²Ð°Ñ Ñ‡Ð°ÑÑ‚ÑŒ Ñ Ð²ÐºÐ»Ð°Ð´ÐºÐ°Ð¼Ð¸ Ð¸ Ñ€Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸ÐµÐ¼ -->
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <!-- Ð’ÐµÑ€Ñ…Ð½ÑÑ ÑÑ‚Ñ€Ð¾ÐºÐ° Ð´Ð»Ñ Ð²ÐºÐ»Ð°Ð´Ð¾Ðº Ð¸ ÐºÐ½Ð¾Ð¿Ð¾Ðº -->
                <RowDefinition Height="Auto"/>
                <!-- ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ° Ð´Ð»Ñ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ð³Ð¾ -->
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ Ñ Ð²ÐºÐ»Ð°Ð´ÐºÐ°Ð¼Ð¸ Ð¸ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð°Ð¼Ð¸ -->
            <Border Grid.Row="0" 
                   BorderBrush="LightGray" 
                   BorderThickness="0,0,0,1"
                   Background="White"
                   Padding="10">
                <StackPanel>
                    <!-- Ð’ÐºÐ»Ð°Ð´ÐºÐ¸ (Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÑŽÑ‚ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ Ñ€Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ñ) -->
                    <Border BorderBrush="LightGray" 
                           BorderThickness="1" 
                           CornerRadius="3"
                           IsVisible="{Binding HasTabs}">
                        <TabControl ItemsSource="{Binding Tabs}"
                                   SelectedItem="{Binding SelectedTab, Mode=TwoWay}"
                                   BorderThickness="0">
                            <TabControl.ItemTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        
                                        <TextBlock Text="{Binding Title}" 
                                                  VerticalAlignment="Center"
                                                  Margin="8,4"
                                                  FontSize="18"/>
                                        
                                        <Button Grid.Column="1"
                                               Command="{Binding CloseCommand}"
                                               Content="âœ•"
                                               FontSize="10"
                                               Width="20"
                                               Height="20"
                                               Padding="0"
                                               Margin="0,0,4,0"
                                               Background="Transparent"
                                               BorderThickness="0"
                                               Cursor="Hand">
                                            <Button.Styles>
                                                <Style Selector="Button">
                                                    <Setter Property="Foreground" Value="Gray" />
                                                </Style>
                                                <Style Selector="Button:pointerover">
                                                    <Setter Property="Foreground" Value="Red" />
                                                    <Setter Property="Background" Value="#f0f0f0" />
                                                </Style>
                                            </Button.Styles>
                                        </Button>
                                    </Grid>
                                </DataTemplate>
                            </TabControl.ItemTemplate>
                            
                            <TabControl.ContentTemplate>
                                <DataTemplate>
                                    <!-- ÐŸÑƒÑÑ‚Ð¾, ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð¾ -->
                                </DataTemplate>
                            </TabControl.ContentTemplate>
                        </TabControl>
                    </Border>
                    
                    <!-- Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ ÐµÑÐ»Ð¸ Ð½ÐµÑ‚ Ð²ÐºÐ»Ð°Ð´Ð¾Ðº -->
                    <Border IsVisible="{Binding NoTabs}"
                           Background="#f8f9fa"
                           Padding="20"
                           CornerRadius="3"
                           Margin="0,10,0,0">
                        <StackPanel HorizontalAlignment="Center">
                            <TextBlock Text="ðŸ“‹ ÐÐµÑ‚ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ñ‹Ñ… Ñ€Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ð¹" 
                                      FontSize="16"
                                      FontWeight="Bold"
                                      Margin="0,0,0,10"/>
                            <TextBlock Text="Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ€Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¸Ð· ÑÐ¿Ð¸ÑÐºÐ°"
                                      HorizontalAlignment="Center"/>
                            <Button Content="ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ ÑÐ¿Ð¸ÑÐ¾Ðº Ñ€Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ð¹"
                                   Command="{Binding OpenScheduleListCommand}"
                                   Margin="0,20,0,0"
                                   Padding="10,5"/>
                        </StackPanel>
                    </Border>
                    
                    <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð² (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ð°Ñ Ð²ÐºÐ»Ð°Ð´ÐºÐ°) -->
                    <StackPanel Orientation="Horizontal" 
                               Spacing="10" 
                               Margin="0,10,0,0"
                               IsVisible="{Binding HasSelectedTab}">
                        <Button Content="ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ" 
                               Command="{Binding LoadCurrentScheduleCommand}"
                               Padding="10,5"/>
                        
                        <Button Content="Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ÑƒÑ€Ð¾Ðº" 
                               Command="{Binding AddLessonCommand}"
                               Padding="10,5"/>
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!-- ÐžÐ±Ð»Ð°ÑÑ‚ÑŒ Ñ€Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ñ (Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ð°Ñ Ð²ÐºÐ»Ð°Ð´ÐºÐ°) -->
            <Border Grid.Row="1"
                   Margin="10"
                   BorderBrush="LightGray" 
                   BorderThickness="1"
                   Background="White"
                   IsVisible="{Binding HasSelectedTab}">
                <ScrollViewer HorizontalScrollBarVisibility="Auto"
                             VerticalScrollBarVisibility="Auto">
                    <scheduleTable:LessonTableView DataContext="{Binding SelectedTab.TableViewModel}"/>
                </ScrollViewer>
            </Border>
        </Grid>
    </Grid>
</UserControl>